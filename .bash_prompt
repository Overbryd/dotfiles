BLACK=$(tput setaf 0)
MAGENTA=$(tput setaf 9)
RED=$(tput setaf 124)
ORANGE=$(tput setaf 172)
GREEN=$(tput setaf 190)
PURPLE=$(tput setaf 141)
WHITE=$(tput setaf 256)
GREY=$(tput setaf 7)
DARKGREY=$(tput setaf 236)
BOLD=$(tput bold)
RESET=$(tput sgr0)

function parse_git_dirty() {
	[[ $(git status 2> /dev/null | tail -n1) != "nothing to commit (working directory clean)" ]] && echo "*"
}

function parse_git_branch() {
	git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e "s/* \(.*\)/\1$(parse_git_dirty)/"
}

function ruby-prompt() {
	version_string=$(rbenv version-name 2> /dev/null)
	if [ $version_string = "system" ]; then
		version_string=""
	fi
	active_gemset=$(rbenv gemset active 2> /dev/null)
	if [ ! $? = 0 ]; then
		active_gemset=""
	else
		active_gemset="($active_gemset)"
	fi
	echo "$version_string$active_gemset"
}

PS1="\[$RED\]\$(ruby-prompt)\n\[$DARKGREY\]\w \[$BLACK\]\$ \[$RESET\]"

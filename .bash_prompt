BLACK=$(tput setaf 0)
MAGENTA=$(tput setaf 9)
RED=$(tput setaf 124)
ORANGE=$(tput setaf 172)
GREEN=$(tput setaf 190)
PURPLE=$(tput setaf 141)
WHITE=$(tput setaf 256)
GREY=$(tput setaf 7)
DARKGREY=$(tput setaf 236)
BOLD=$(tput bold)
RESET=$(tput sgr0)

function star-git-dirty() {
  [[ $(git status --porcelain 2> /dev/null | wc -l) -gt 0 ]] && echo "*"
}

function current-git-branch() {
  local b=$(git symbolic-ref HEAD 2> /dev/null)
  echo -n "${b#refs/heads/}"
}

function git-stash-count() {
  git stash list 2> /dev/null | wc -l | tr -d " "
}

# Outputs branch name, optionally dirty flag and/or number of stashes
function git-prompt() {
  echo "[$(current-git-branch)$(star-git-dirty):$(git-stash-count)]" | sed -e 's/:0//;/\[]/d'
}

# Outputs current ruby version, optionally the active gemset
function ruby-prompt() {
  echo "$(rbenv version-name 2> /dev/null)@$(rbenv gemset active 2> /dev/null) " | sed -e 's/system//;s/[@ ]*$/ /;s/^ *$//'
}

PS1="\[$DARKGREY\]\w\[$ORANGE\]\$(git-prompt) \[$RED\]\$(ruby-prompt)\[$RED\]\nâ˜… \[$RESET\]"

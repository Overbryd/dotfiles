BLACK=$(tput setaf 0)
MAGENTA=$(tput setaf 9)
RED=$(tput setaf 124)
ORANGE=$(tput setaf 172)
GREEN=$(tput setaf 190)
PURPLE=$(tput setaf 141)
WHITE=$(tput setaf 256)
GREY=$(tput setaf 7)
DARKGREY=$(tput setaf 236)
BOLD=$(tput bold)
RESET=$(tput sgr0)

function star-git-dirty() {
	[[ $(git status --porcelain 2> /dev/null | wc -l) -gt 0 ]] && echo "*"
}

function current-git-branch() {
	git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e "s/* \(.*\)/\1/"
}

function git-stash-count() {
	git stash list 2> /dev/null | wc -l | tr -d ' '
}

function git-prompt() {
	# pull together results, remove empty ones or a stash count of zero and join everything by a colon
	echo "($(current-git-branch):$(star-git-dirty):$(git-stash-count))" # | sed -e "s/:://g" -e "s/^://" -e "s/0://g"
}

function ruby-prompt() {
	version_string=$(rbenv version-name 2> /dev/null)
	if [ $version_string = "system" ]; then
		version_string=""
	fi
	active_gemset=$(rbenv gemset active 2> /dev/null)
	if [ ! $? = 0 ]; then
		active_gemset=""
	else
		active_gemset="($active_gemset)"
	fi
	echo "$version_string$active_gemset"
}

PS1="\[$DARKGREY\]\w\[$ORANGE\]$(git-prompt) \[$RED\]\$(ruby-prompt)\[$RED\]â˜… \[$RESET\]"
